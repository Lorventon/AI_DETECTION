# Документация проекта "Расчет трудовых и материальных затрат на операции по окраске элементов сложных объектов"

## Описание проекта
Проект предназначен для автоматического детектирования кузовных элементов автомобиля на фотографии с использованием нейронной сети на базе YOLO (Ultralytics). После выявления элементов кузова (например, капот, крыша, двери и т.д.), система рассчитывает трудовые и материальные затраты на их покраску. Расчёт осуществляется на основе данных о площади элементов, технологических параметров (ширина факела краскопульта, вылет факела и стоимость ЛКМ), а также вводных данных пользователя, таких как площадь элемента и стоимость одного литра ЛКМ.

## Проблема, которую решает проект
Процесс покраски сложных объектов, таких как автомобили, является технически сложным и требует значительных затрат времени и материалов. Параметры, влияющие на трудоемкость и материалозатраты, во многом зависят от сложности поверхности. В таких случаях автоматизация расчёта затрат на покраску объектов сложной формы, например, автомобильных кузовных элементов, может значительно сократить время и повысить точность расчётов.

## Основные характеристики проекта
1. **Обнаружение кузовных элементов**: Используется предобученная модель YOLO (Ultralytics) для сегментации изображения и выделения кузовных элементов автомобиля (например, капот, крыша, двери).
2. **Калькуляция затрат на покраску**: Система рассчитывает стоимость покраски на основе площади элементов и технологических данных (ширина факела, вылет факела, стоимость ЛКМ).
3. **Ввод переменных пользователем**: Пользователь может настроить параметры:
   - Физическая площадь элемента (например, передней двери) в квадратных метрах.
   - Ширина факела краскопульта.
   - Вылет факела за границы элемента.
   - Стоимость 1 литра ЛКМ.

## Установка

### Требования
- Python 3.8 или выше
- Все необходимые зависимости указаны в файле `requirements.txt`

### Установка зависимостей
1. Клонируйте репозиторий проекта:
    ```bash
    git clone https://github.com/Lorventon/HackInHome2024.git
    cd HackInHome2024
    ```
2. Установите необходимые библиотеки:
    ```bash
    pip install -r requirements.txt
    ```

## Алгоритм запуска

### Запуск скрипта
1. Запустите основной скрипт для анализа изображения:
    ```bash
    python model/calc/calc.py
    ```

2. Введите следующие параметры, когда будет предложено:
    - Название файла с фотографией для обработки.
    - Физическая площадь передней двери (например, 0.8 м²).
    - Ширина факела краскопульта (например, 0.1 м).
    - Вылет факела (например, 0.08 м).
    - Стоимость 1 литра ЛКМ.

3. После выполнения скрипта, программа выведет изображение с выделенными элементами кузова и расчётные данные для каждого элемента.

## Алгоритм расчета

1. **Шаг 1: Детектирование элементов**:
   - Модель YOLO используется для выделения элементов кузова автомобиля на изображении.
   - Маски для каждого элемента (например, капот, крыша, передние и задние двери) будут сгенерированы.

2. **Шаг 2: Расчет физической площади**:
   - Площадь каждого элемента рассчитывается на основе количества пикселей в его маске, с учётом масштаба.

3. **Шаг 3: Расчет площади обработки**:
   - Площадь обработки рассчитывается с учётом ширины факела краскопульта и длины прохода.
   - Учитывается вылет факела за границы элемента.

4. **Шаг 4: Расчет затрат на покраску**:
   - Затраты рассчитываются на основе площади обработки и стоимости 1 литра ЛКМ.

## Структура проекта

### `model/dataset`
В этой папке находятся данные для обучения модели. Она включает две основные подкатегории:
- **`train/`**: Папка для обучения модели, содержащая изображения и аннотации для тренировки.
- **`val/`**: Папка для валидации, содержащая изображения для проверки качества модели.

### `model/calc`
В этой папке реализован модуль для расчёта трудовых и материальных затрат на покраску кузовных элементов. Здесь находится код для вычисления стоимости покраски на основе введённых пользователем данных и расчёта площади обработки.

### `runs`
Папка для хранения данных, связанных с процессом обучения модели. Здесь находятся результаты тренировок, веса модели и конфигурации для запуска обучения.

### `backend`
Содержит серверную часть проекта, которая обрабатывает запросы от пользователя и взаимодействует с базой данных. Также реализовано API для взаимодействия с фронтендом.

### `frontend`
В этой папке находится веб-интерфейс для взаимодействия с пользователем. Он позволяет загрузить фотографию, ввести параметры для расчёта и получить результаты. В настоящее время интерфейс ещё не завершён.

## Руководство для разработчиков

### dataset для обучения модели
Для обучения модели используется заранее подготовленный набор данных, расположенный в директории:
`../HackInHome2024/model/dataset/`
В папке находятся два подкаталога:
- **`train/`**: Данные для обучения модели.
- **`val/`**: Данные для валидации модели.

Каждая из этих папок должна содержать изображения и соответствующие аннотации для сегментации объектов.

### Расчёт трудовых и материальных затрат
В папке **`calc/`** реализован модуль для вычисления затрат на покраску элементов автомобиля. Он использует данные о физических размерах, ширине факела и других параметрах для точного расчёта стоимости покраски.

### Обучение модели
Папка **`runs/`** содержит все данные, связанные с обучением модели. Здесь хранятся веса модели, результаты тренировок и конфигурации.

### Backend и Frontend
- **`backend/`**: Серверная часть, отвечающая за обработку запросов и работу с данными.
- **`frontend/`**: Веб-интерфейс, предоставляющий пользователю возможность загрузить изображения и получить результаты расчётов.

---
