# Документация проекта "Расчет трудовых и материальных затрат на операции по окраске элементов сложных объектов"

### Описание проекта

Проект предназначен для автоматического детектирования кузовных элементов автомобиля на фотографии и последующего расчета трудовых и материальных затрат на операции по окраске элементов сложных объектов. Система использует нейронную сеть на базе YOLO (Ultralytics) для сегментации изображения и выделения отдельных частей автомобиля (например, капот, крыша, двери). На основе данных о площади элементов и технологических параметров (ширина факела краскопульта, вылет факела и стоимость ЛКМ) система рассчитывает физическую площадь каждого элемента, площадь обработки, и затраты на покраску.

### Проблема, которую решает проект:
Процесс покраски сложных объектов, таких как автомобили, является технически сложным и требует значительных затрат времени и материалов. Параметры, влияющие на трудоемкость и материалозатраты, во многом зависят от сложности поверхности. Система автоматического расчета затрат на покраску объектов сложной формы, таких как автомобильные кузовные элементы, актуальна в производственном бизнесе, поскольку позволяет сократить время и повысить точность расчета необходимых материалов.

## Основные характеристики

1. **Обнаружение кузовных элементов**: Используется предобученная модель YOLO (Ultralytics) для сегментации кузовных элементов на изображении.
2. **Калькуляция затрат на покраску**: Система рассчитывает стоимость покраски на основе площади элементов и технологических данных (ширина факела, вылет факела, и стоимость ЛКМ).
3. **Ввод переменных пользователем**: Пользователь может настроить параметры, такие как:
   - Физическая площадь элемента (например, передней двери) в квадратных метрах.
   - Ширина факела краскопульта.
   - Вылет факела за границы элемента.
   - Стоимость 1 литра ЛКМ.

### Установка

#### Требования
- Python 3.8 или выше
- Все необходимые зависимости находятся в requirements.txt, которые установим ниже

### <span style="color:rgb(192, 0, 0)"><span style="color:rgb(192, 0, 0)"><span style="color:rgb(192, 0, 0)"> Возможен docker и установку зависимсотей**<span style="color:rgb(192, 0, 0)"> </span>опускаем</span></span></span>

### Установка зависимостей

1. Клонируйте репозиторий проекта:
    ```bash
    git clone https://github.com/Lorventon/HackInHome2024.git
    cd HackInHome2024
    ```
2. Установите необходимые библиотеки:
    ```bash
    pip install -r requirements.txt
    ```
### Алгоритм запуска
1. **Запуск скрипта**:
   Запустите основной скрипт для анализа изображения:
    ```bash
	 Запуск скрипта, который расположен ../HackInHome2024/model/calc/calc.py
	 Запустите скрипт через терминал
	 python calc.py
    ```

2. **Ввод переменных пользователем**:
   При запуске скрипта, пользователю будет предложено ввести следующие переменные:

   - Название файла фотографии модели для обработки
   - Физическая площадь передней двери 
   - Ширина факела краскопульта
   - Вылет факела
   - Стоимость 1 литра ЛКМ

3. **Вывод результата**:
   После выполнения, программа выведет изображение, на котором будут выделены элементы кузова автомобиля, а также результат расчета для каждого элемента кузова, например:
### Алгоритм расчета

1. **Шаг 1: Детектирование элементов**:
   - Модель YOLO используется для выделения элементов кузова автомобиля на изображении.
   - Выделяются маски для каждого элемента, такие как капот, крыша, передняя и задняя двери.

2. **Шаг 2: Расчет физической площади**:
   - Площадь каждого элемента рассчитывается на основе количества пикселей в его маске и масштабируется относительно физической площади эталона (например, площадь передней двери).

3. **Шаг 3: Расчет площади обработки**:
   - Используя периметр элемента, рассчитывается площадь обработки, которая зависит от ширины факела краскопульта и длины прохода.
   - Учитывается также вылет факела за границы элемента.

4. **Шаг 4: Расчет затрат на покраску**:
   - На основе площади обработки и стоимости 1 литра ЛКМ рассчитываются общие затраты на покраску каждого элемента.


## Руководство для разработчиков (структура кода, объяснение ключевых частей)

### dataset для обучения модели

Для обучения модели и её дальнейшей оценки используется заранее подготовленный набор данных, который расположен в следующей директории:
`../HackInHome2024/model/dataset/`
В этой папке содержатся две основные подкатегории данных, которые необходимы для обучения и валидации модели:

- **`train/`** — Папка, содержащая изображения и аннотации для обучения модели. Эти данные используются для тренировки нейронной сети, чтобы она могла эффективно распознавать элементы кузова автомобиля на новых изображениях.
    
- **`val/`** — Папка с данными для валидации. Эти изображения служат для проверки качества работы модели после её обучения, что позволяет оценить её точность и способность к обобщению на данных, которые она не видела во время тренировки.
    

Каждая из этих папок должна содержать изображения в формате, который поддерживается моделью, а также соответствующие аннотации или маски для сегментации объектов, которые необходимо детектировать.

### Расчет трудовых и материальных затрат 

В папке **`calc/`** реализован модуль, отвечающий за вычисление трудовых и материальных затрат на окраску элементов автомобиля. Этот компонент системы использует данные о физических размерах элементов, ширине факела краскопульта и других переменных для точного расчета стоимости покраски. Основные файлы в этой папке содержат алгоритмы, которые производят расчеты на основе введённых пользователем значений, а также алгоритмы для обработки изображений, чтобы точно вычислить площадь каждого элемента кузова.

### Обучение модели

Папка **`runs/`** содержит все данные, связанные с процессом обучения модели. Здесь находятся результаты тренировки, веса модели, а также конфигурации, которые используются для запуска процесса обучения. Обучение производится с использованием предобученной модели YOLO, модифицированной для задачи сегментации элементов кузова автомобилей. В этой папке можно найти все необходимые файлы для анализа и повторного обучения модели, если это потребуется.

### **`backend`** — Серверная часть проекта

В папке **`backend/`** содержится серверная часть проекта, которая отвечает за обработку запросов от пользователей и взаимодействие с базой данных. Серверная часть обрабатывает все запросы на расчёт и выполнение операций с изображениями, а также предоставляет API для взаимодействия с фронтендом. В будущем предполагается полноценная интеграция с внешними системами и сервисами.

### **`frontend`** — Веб-интерфейс проекта

Папка **`frontend/`** включает в себя код, который отвечает за визуальное представление данных и взаимодействие с пользователем через веб-интерфейс. Здесь находятся файлы HTML, CSS и JavaScript, которые обеспечивают отображение результатов работы модели и позволяют пользователю загрузить изображение, ввести необходимые параметры для расчета и получить результаты. На данный момент интерфейс еще не завершён, но в дальнейшем он будет развёрнут для предоставления удобного способа взаимодействия с системой.


</span> 
